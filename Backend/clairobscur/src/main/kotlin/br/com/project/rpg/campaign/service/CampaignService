package br.com.project.rpg.campaign.service

import br.com.project.rpg.campaign.domain.Campaign
import br.com.project.rpg.campaign.dto.CreateCampaignRequest
import br.com.project.rpg.campaign.dto.CreateCampaignResponse
import br.com.project.rpg.campaign.repository.CampaignRepository
import org.springframework.stereotype.Service
import java.time.Instant

@Service
class CampaignService(
    private val repository: CampaignRepository
) {
    fun criar(req: CreateCampaignRequest): CreateCampaignResponse {
        val nova = Campaign(
            id = 0L,
            nome = req.nome!!.trim(),
            personagemId = req.personagemId!!,
            criadoEm = Instant.now()
        )
        val salva = repository.salvar(nova)
        return CreateCampaignResponse(
            id = salva.id,
            nome = salva.nome,
            personagemId = salva.personagemId,
            criadoEm = salva.criadoEm
        )
    }
}
